(function(d,e){function f(){this.id=null;this.name=this.abbr="";this.active=!1}var b=d.acw.components,a=d.React,k=b.StdList,l=b.StdForm,g,h;h=a.createClass({displayName:"OrgApp",toggleApp:function(a){this.props.setAppState(this.props.id,a.currentTarget.checked);e.ajax(this.props.action,{type:a.currentTarget.checked?"POST":"DELETE"})},render:function(){return a.DOM.tr(null,a.DOM.td(null,a.DOM.form({role:"form"},a.DOM.div({className:"checkbox"},a.DOM.input({type:"checkbox",checked:this.props.enabled,
onChange:this.toggleApp})))),a.DOM.td(null,this.props.abbr),a.DOM.td(null,this.props.name))}});g=a.createClass({displayName:"OrgApps",getInitialState:function(){return{apps:{}}},loadApps:function(a){e.get("/admin/org/"+(a||this.props.org)+"/apps").done(function(a){if(!1!==a instanceof Array){var c={};a.forEach(function(a){c[a.id]=a});this.setState({apps:c})}}.bind(this))},componentDidMount:function(){this.loadApps()},componentWillReceiveProps:function(a){this.loadApps(a.org)},setAppState:function(a,
m){var b=this.state.apps;b[a].enabled=m;this.setState({apps:b})},render:function(){var c=_.map(this.state.apps,function(a){return h({setAppState:this.setAppState,action:"/admin/org/"+this.props.org+"/app/"+a.id,key:a.id,id:a.id,abbr:a.abbr,name:a.name,enabled:a.enabled})}.bind(this));return a.DOM.div(null,a.DOM.h4(null,"Aplicativos"),a.DOM.table({className:"table table-condensed"},a.DOM.thead(null,a.DOM.tr(null,a.DOM.th(null,"Ativado"),a.DOM.th(null,"Nome"),a.DOM.th(null,"Descri\u00e7\u00e3o"))),
a.DOM.tbody(null,c)))}});b.OrgManager=a.createClass({displayName:"OrgManager",getInitialState:function(){return{selected:new f}},setSelected:function(a,b){this.setState({selected:b||a.id!==this.state.selected.id?a:new f})},render:function(){return a.DOM.div(null,a.DOM.div({className:"row"},a.DOM.div({className:"col-md-4"},k({uri:"/admin/orgs",selected:this.state.selected,setSelected:this.setSelected})),a.DOM.div({className:"col-md-8"},l({id:this.state.selected.id,item:this.state.selected,action:"/admin/org",
iname:"organiza\u00e7\u00e3o",setSelected:this.setSelected}),this.state.selected.id&&this.state.selected.active&&g({org:this.state.selected.id}))))}})})(window,jQuery);
