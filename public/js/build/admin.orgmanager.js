(function(f,g){function h(){this.id=null;this.name=this.abbr="";this.active=!1}var e=f.acw.components,a=f.React,m=e.StdList,n=e.StdForm,k,l;l=a.createClass({displayName:"OrgApp",toggleApp:function(a){this.props.setAppState(this.props.id,a.currentTarget.checked);g.ajax(this.props.action,{type:a.currentTarget.checked?"POST":"DELETE"})},render:function(){return a.DOM.tr(null,a.DOM.td(null,a.DOM.form({role:"form"},a.DOM.div({className:"checkbox"},a.DOM.input({type:"checkbox",checked:this.props.enabled,
onChange:this.toggleApp})))),a.DOM.td(null,this.props.abbr),a.DOM.td(null,this.props.name))}});k=a.createClass({displayName:"OrgApps",getInitialState:function(){return{apps:{}}},loadApps:function(a){g.get("/admin/org/"+(a||this.props.org)+"/apps").done(function(a){if(!1!==a instanceof Array){var c={};a.forEach(function(a){c[a.id]=a});this.setState({apps:c})}}.bind(this))},componentDidMount:function(){this.loadApps()},componentWillReceiveProps:function(a){this.loadApps(a.org)},setAppState:function(a,
d){var b=this.state.apps;b[a].enabled=d;this.setState({apps:b})},render:function(){var c=_.map(this.state.apps,function(a){return l({setAppState:this.setAppState,action:"/admin/org/"+this.props.org+"/app/"+a.id,key:a.id,id:a.id,abbr:a.abbr,name:a.name,enabled:a.enabled})}.bind(this));return a.DOM.div(null,a.DOM.h4(null,"Aplicativos"),a.DOM.table({className:"table table-condensed"},a.DOM.thead(null,a.DOM.tr(null,a.DOM.th(null,"Ativado"),a.DOM.th(null,"Nome"),a.DOM.th(null,"Descri\u00e7\u00e3o"))),
a.DOM.tbody(null,c)))}});e.OrgManager=a.createClass({displayName:"OrgManager",getInitialState:function(){return{selected:new h,forceUpdate:(new Date).getTime()}},setSelected:function(a,d){var b={selected:d||a.id!==this.state.selected.id?a:new h};d&&(b.forceUpdate=(new Date).getTime());this.setState(b)},render:function(){return a.DOM.div(null,a.DOM.div({className:"row"},a.DOM.div({className:"col-md-4"},m({uri:"/admin/orgs",forceUpdate:this.state.forceUpdate,selected:this.state.selected,setSelected:this.setSelected})),
a.DOM.div({className:"col-md-8"},n({id:this.state.selected.id,item:this.state.selected,action:"/admin/org",iname:"organiza\u00e7\u00e3o",setSelected:this.setSelected}),this.state.selected.id&&this.state.selected.active&&k({org:this.state.selected.id}))))}})})(window,jQuery);
