(function(f,e){var m=f.acw.components,a=f.React,g,h,k,l;k=a.createClass({displayName:"SelectedUser",render:function(){return a.DOM.div({className:"selectedUser"},a.DOM.form({action:"/admin/user",method:"POST"},"the form goes here"))}});l=a.createClass({displayName:"UserSearch",handleChange:function(){var a=this.refs.activeUsersOnlyInput.getDOMNode(),c=this.refs.filterTextInput.getDOMNode().value;this.props.onUserInput(c,a.checked)},render:function(){return a.DOM.form({onSubmit:this.handleSubmit},
a.DOM.input({type:"search",placeholder:"Busque pelo Nome/Email",ref:"filterTextInput",onChange:this.handleChange,value:this.props.filterText}),a.DOM.p({className:"userSearchToggle"},a.DOM.label({htmlFor:"UserSearchFilterToggle"},a.DOM.input({id:"UserSearchFilterToggle",type:"checkbox",ref:"activeUsersOnlyInput",disabled:!this.props.filterText.length,onChange:this.handleChange,checked:0<this.props.filterText.length?this.props.activeUsersOnly:!0,value:this.props.activeUsersOnly}),a.DOM.span(null,"Apenas usu\u00e1rios ativos"))))}});
h=a.createClass({displayName:"UserItem",render:function(){var d=this.props.user,c=d.full_name||d.short_name||"sem nome ...",c=0===d.active?a.DOM.del({title:"Usu\u00e1rio desativado"},c):c;return a.DOM.a({href:"#",className:"list-group-item"},c)}});(function(){var d;g=a.createClass({displayName:"UserList",scrollChange:function(a){var b=this.refs.userList.getDOMNode();clearTimeout(d);d=setTimeout(function(){var a=b.scrollTop,c=0.1*b.scrollHeight;10>a&&(this.props.onOffsetChange("up"),this.props.reachedTop||
e(b).animate({scrollTop:a+c}));10>b.scrollHeight-(a+e(b).height())&&(this.props.onOffsetChange("down"),this.props.reachedBottom||e(b).animate({scrollTop:a-c}))}.bind(this),500)},render:function(){var c=[];this.props.users.forEach(function(a,d){c.push(h({key:a.id,user:a}))});return a.DOM.div({className:"userList list-group",ref:"userList",onScroll:this.scrollChange},c)}})})();(function(){var d;m.UserManager=a.createClass({displayName:"UserManager",getInitialState:function(){return{users:[],selectedUser:null,
reachedBottom:!1,reachedTop:!0,query:{filterText:"",activeUsersOnly:!0,offset:0}}},componentDidMount:function(){this.reloadList()},offsetChange:function(a){var b=this.state.query.offset;a=10>b&&"up"===a?0:"up"===a?b-10:b+10;b!==a&&(this.setState({query:_.merge(this.state.query,{offset:a})}),this.reloadList())},searchInputChange:function(a,b){this.setState({query:_.merge(this.state.query,{filterText:a,activeUsersOnly:0<a.length?b:!0})});clearTimeout(d);d=setTimeout(function(){this.reloadList()}.bind(this),
500)},reloadList:function(){var a=this.state.query.offset;e.get("/admin/users",this.state.query).done(function(b){this.setState({users:b.users,reachedTop:0===b.offset,reachedBottom:b.offset<a,query:_.merge(this.state.query,{offset:b.offset})})}.bind(this))},render:function(){return a.DOM.div({className:"row userTabWrapper"},a.DOM.div({className:"col-md-4"},l({activeUsersOnly:this.state.query.activeUsersOnly,filterText:this.state.query.filterText,onUserInput:this.searchInputChange}),g({users:this.state.users,
onOffsetChange:this.offsetChange,reachedTop:this.state.reachedTop,reachedBottom:this.state.reachedBottom})),a.DOM.div({className:"col-md-8"},k({user:this.state.selectedUser})))}})})()})(window,jQuery);
